<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Soluris â€” Recherche juridique IA</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <div class="app-layout">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-logo">
        <div class="logo-icon" style="width:28px;height:28px;background:var(--gradient-brand);border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:0.75rem;font-weight:800;color:white;">S</div>
        Soluris
      </div>
      <button class="new-chat-btn" onclick="newChat()">+ Nouvelle recherche</button>
      <div class="conversations-list" id="conversationsList"></div>
      <div class="sidebar-user" id="userInfo">
        <div class="avatar">?</div>
        <span>Chargementâ€¦</span>
      </div>
    </aside>

    <!-- Main Chat -->
    <main class="chat-main">
      <!-- Welcome Screen -->
      <div class="welcome-screen" id="welcomeScreen">
        <h2>Bonjour ğŸ‘‹</h2>
        <p>Posez votre question juridique en langage naturel.</p>
        <div class="prompt-cards">
          <div class="prompt-card" onclick="sendPrompt(this)">
            <div class="prompt-title">DÃ©lais de prescription</div>
            Quels sont les dÃ©lais de prescription en droit des obligations ?
          </div>
          <div class="prompt-card" onclick="sendPrompt(this)">
            <div class="prompt-title">Droit du bail</div>
            Comment contester une hausse de loyer Ã  GenÃ¨ve ?
          </div>
          <div class="prompt-card" onclick="sendPrompt(this)">
            <div class="prompt-title">Droit du travail</div>
            Quelles sont les rÃ¨gles de licenciement abusif en Suisse ?
          </div>
          <div class="prompt-card" onclick="sendPrompt(this)">
            <div class="prompt-title">Droit de la famille</div>
            Quelle est la procÃ©dure de divorce par requÃªte commune ?
          </div>
        </div>
      </div>

      <!-- Messages -->
      <div class="messages-area" id="messagesArea"></div>

      <!-- Typing Indicator -->
      <div class="typing-indicator" id="typingIndicator">
        <div class="msg-avatar" style="background:var(--gradient-brand);width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:0.7rem;font-weight:700;color:white;min-width:32px;">S</div>
        <div class="typing-dots">
          <span></span><span></span><span></span>
        </div>
      </div>

      <!-- Input -->
      <div class="input-area">
        <div class="input-filters" style="display:flex;gap:8px;margin-bottom:8px;padding:0 12px">
          <select id="filterJurisdiction" style="background:var(--surface);border:1px solid var(--border);color:var(--text-secondary);padding:4px 10px;border-radius:6px;font-size:0.78rem;font-family:var(--font-body);cursor:pointer" onchange="saveFilters()">
            <option value="">Toutes juridictions</option>
            <option value="CH">ğŸ‡¨ğŸ‡­ Droit fÃ©dÃ©ral</option>
            <option value="GE">GenÃ¨ve</option>
            <option value="VD">Vaud</option>
            <option value="NE">NeuchÃ¢tel</option>
            <option value="FR">Fribourg</option>
            <option value="VS">Valais</option>
            <option value="JU">Jura</option>
          </select>
          <select id="filterDomain" style="background:var(--surface);border:1px solid var(--border);color:var(--text-secondary);padding:4px 10px;border-radius:6px;font-size:0.78rem;font-family:var(--font-body);cursor:pointer" onchange="saveFilters()">
            <option value="">Tous domaines</option>
            <option value="droit_civil">âš– Civil</option>
            <option value="droit_penal">ğŸ”’ PÃ©nal</option>
            <option value="droit_public">ğŸ› Public / Administratif</option>
            <option value="droit_social">ğŸ¤ Social</option>
            <option value="bail">ğŸ  Bail</option>
            <option value="travail">ğŸ’¼ Travail</option>
            <option value="famille">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Famille</option>
            <option value="fiscal">ğŸ’° Fiscal</option>
          </select>
        </div>
        <div class="input-box">
          <textarea id="messageInput" rows="1" placeholder="Posez votre question juridiqueâ€¦" onkeydown="handleKeyDown(event)" oninput="autoResize(this)"></textarea>
          <button class="send-btn" id="sendBtn" onclick="sendMessage()">â†’</button>
        </div>
        <div class="input-disclaimer">Soluris peut faire des erreurs. VÃ©rifiez toujours les sources citÃ©es.</div>
      </div>
    </main>
  </div>

  <script src="/js/app.js"></script>
</body>
</html>
